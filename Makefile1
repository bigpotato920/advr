TARGET = route_engine
CC=gcc
CFLAGS=-g -Wall
LDFLAGS= -lpcap -lpthread -lm -lconfig


BIN_NAME = $(TARGET)

SOURCES = $(wildcard *.c) 
OBJECTS = $(patsubst %.c, %.o,$(SOURCES))

$(TARGET) : Makefile.dependencies $(OBJECTS)
	$(CC) -o $@ $(OBJECTS) $(LDFLAGS)
	rm -rf *.o
	rm -rf Makefile.dependencies

Makefile.dependencies:: $(SOURCES) $(HEADERS)
	$(CC) $(CFLAGS) -MM $(SOURCES) > Makefile.dependencies

-include Makefile.dependencies
	
build:
	@mkdir -p tests

valgrind:
	@valgrind "--track-origins=yes" $(BIN_NAME)

clean:
	rm -rf $(TARGET) 
	rm -rf *.o
	rm -rf Makefile.dependencies
